@page
@inject CommonLocalizationService localizer
@using LEotA.Services
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
<div class="text-center">
    <h1 class="display-4">@localizer.Get("Welcome")</h1>
    <p>@localizer.Get("Learn")</p>
</div>

<!-- items being paged -->
<table class="table table-sm table-striped border border-dark">
    @{
        try
        {
            var nameresult = Model.Items.Zip(Model.Description, (i, s) => new {Name = i, Desc = s});
            var result = nameresult.Zip(Model.Id, (i, s) => new {It = i, Id = s});
            foreach (var items in result)
            {
                <tr>
                    <td>
                    
                        <h2><a asp-area="" asp-page="/News" asp-route-id="@items.Id">@items.It.Name</a></h2>
                        <p>@items.It.Desc</p>
                    </td>
                </tr>
            }
        }
        catch(Exception e)
        {
            <td>
                <h2>ERROR:</h2>
                <p>@e</p>
            </td>    
        }
    }
</table>   


<!-- pager -->
@{
    try
    {
        if (Model.Pager.Pages.Any())
        {
            <nav class="table-responsive mb-5">
                <ul class="pagination justify-content-center d-flex flex-wrap">
                    @if (Model.Pager.CurrentPage > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="/">First</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="/?p=@(Model.Pager.CurrentPage - 1)">Previous</a>
                        </li>
                    }

                    @foreach (var p in Model.Pager.Pages)
                    {
                        <li class="page-item @(p == Model.Pager.CurrentPage ? "active" : "")">
                            <a class="page-link" href="/?p=@p">@p</a>
                        </li>
                    }

                    @if (Model.Pager.CurrentPage < Model.Pager.TotalPages)
                    {
                        <li class="page-item">
                            <a class="page-link" href="/?p=@(Model.Pager.CurrentPage + 1)">Next</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="/?p=@(Model.Pager.TotalPages)">Last</a>
                        </li>
                    }
                </ul>
            </nav>
        }
    }
    catch (Exception e)
    {
        <td>
            <h2>ERROR:</h2>
            <p>@e</p>
        </td>  
    }
}

@* <div class="border-bottom-last-0 first-pt-0"> *@
@*     @{ *@
@*         try *@
@*         { *@
@*             foreach (var news in (List<News>)ViewData["newsList"]) *@
@*             { *@
@*                 <div class="jumbotron p-3 p-mb-5 text-white rounded"> *@
@*                     <div class="col-mb-6 px-0"> *@
@*                         <h1 class="display-4"><a asp-area="" asp-page="/News" asp-route="@news.Id">@LocalizationHelper.GetTextByCulture(news.Name, culture)</a></h1> *@
@*                     </div> *@
@*                     <p class="lead my-3">@LocalizationHelper.GetTextByCulture(news.Description, culture)</p> *@
@*                 </div> *@
@*             } *@
@*         } *@
@*         catch (Exception e) *@
@*         { *@
@*             <div class="container mb-3 border"> *@
@*                 <p>NULL</p> *@
@*             </div> *@
@*         } *@
@*     } *@